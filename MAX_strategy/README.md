# Описание стратегии MultiIndicatorStrategy

**MultiIndicatorStrategy** — это торговая стратегия, использующая несколько индикаторов для принятия решений о покупке и продаже активов. Стратегия включает в себя такие индикаторы, как:

- **Exponential Moving Averages (EMA)**: Для оценки тренда на различных временных интервалах.
- **Relative Strength Index (RSI)**: Для определения перекупленности или перепроданности актива.
- **Average True Range (ATR)**: Для оценки волатильности и расчета размера позиции.
- **Moving Average Convergence Divergence (MACD)**: Для определения направления тренда.
- **Stochastic Oscillator**: Для оценки уровня перекупленности или перепроданности актива на основе стохастического осциллятора.

## Основные параметры стратегии

1. **EMA (Exponential Moving Averages)**:
   - **ema_short** (Период 9): Краткосрочное среднее.
   - **ema_middle** (Период 12): Среднесрочное среднее.
   - **ema_long** (Период 30): Долгосрочное среднее.

2. **RSI (Relative Strength Index)**:
   - Период 16, используется для выявления перекупленности и перепроданности.

3. **ATR (Average True Range)**:
   - Период 12, используется для оценки волатильности рынка и расчета размера позиции.

4. **MACD (Moving Average Convergence Divergence)**:
   - Долгосрочный период 30 и короткий период 12, используется для выявления направления тренда.

5. **Stochastic Oscillator**:
   - **stochastic_long** (Период 9): Стохастик для долгосрочного анализа.
   - **stochastic_short** (Период 3): Стохастик для краткосрочного анализа.

## Логика работы стратегии

### Вход в позицию:

1. **Покупка (Long Position)**:
   - **Тренд восходящий**: MACD выше сигнальной линии (EMA), что указывает на восходящий тренд.
   - **Сигналы от стохастика**: Стохастический осциллятор с длинным периодом (stochastic_long) ниже 0.4.
   - **Перекупленность или перепроданность**: RSI ниже 30 (перепроданность).
   - **Условия для покупки**: Если все условия выполняются, стратегия открывает длинную позицию.

2. **Продажа (Short Position)**:
   - **Тренд нисходящий**: MACD ниже сигнальной линии (EMA), что указывает на нисходящий тренд.
   - **Сигналы от стохастика**: Стохастический осциллятор с длинным периодом (stochastic_long) выше 0.6.
   - **Перекупленность**: RSI выше 70 (перекупленность).
   - **Условия для продажи**: Если все условия выполняются, стратегия открывает короткую позицию.

3. **Флэтовый рынок**:
   - Когда рынок находится в боковом тренде (флэте), стратегия может открыть короткую позицию, если стохастический осциллятор с коротким периодом (stochastic_short) выше 0.8, что указывает на возможный разворот.

### Выход из позиции:

1. **Выход из длинной позиции**:
   - Если стохастический осциллятор с длинным периодом (stochastic_long) выше 0.6 (перекупленность).
   - Если MACD пересекает сигнальную линию в обратную сторону.
   - Если текущая прибыль превышает величину ATR, что может сигнализировать о возможной коррекции.
   - Если RSI превышает 70, что также указывает на возможную перекупленность.

2. **Выход из короткой позиции**:
   - Если стохастический осциллятор с длинным периодом (stochastic_long) ниже 0.7 (перепроданность).
   - Если MACD пересекает сигнальную линию вверх.
   - Если текущая прибыль превышает величину ATR.
   - Если RSI меньше 30, что может указывать на перепроданность.


# Управление позицией и риск-менеджмент

## Параметры:

- **capital** — текущий капитал трейдера.
- **risk_per_trade** — максимальный риск на одну сделку (в процентах от капитала).
- **atr_value** — значение Average True Range (ATR), которое показывает волатильность рынка.

Размер позиции будет пропорционален волатильности рынка: чем выше ATR, тем меньше будет размер позиции, что позволяет адаптировать стратегию к изменениям на рынке.

## Управление позицией

### Stop Loss

Стратегия использует динамический стоп-лосс, который устанавливается в зависимости от величины ATR. Например, стоп-лосс может быть установлен на уровне **1.5x ATR** от входной цены. Это позволяет учесть рыночную волатильность и минимизировать убытки.

### Take Profit

Стратегия также использует динамический тейк-профит, который устанавливается на уровне **2x ATR** от входной цены. Это позволяет зафиксировать прибыль при достижении адекватного уровня прибыли в условиях текущей волатильности.

### Trailing Stop

Если рынок движется в благоприятном направлении, trailing stop позволяет зафиксировать прибыль, следуя за ценой, когда она движется в сторону прибыли, но оставаясь на заданном расстоянии от текущей рыночной цены (например, **1x ATR**).
